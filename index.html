<!doctype html>
<html lang="ro">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <title>Ve»ôti bune</title>
  <meta name="description" content="Ve»ôti bune: »ôtiri pozitive, curate, din surse serioase. Rom√¢nia »ôi global, pe sec»õiuni." />

  <link rel="canonical" href="https://vcarciu.github.io/vesti-bune/" />
  <link rel="icon" href="/vesti-bune/favicon.svg" type="image/svg+xml" />

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Ve»ôti bune" />
  <meta property="og:title" content="Ve»ôti bune" />
  <meta property="og:description" content="»òtiri pozitive, curate, din surse serioase. Rom√¢nia + global, pe sec»õiuni." />
  <meta property="og:url" content="https://vcarciu.github.io/vesti-bune/" />
  <meta property="og:image" content="https://vcarciu.github.io/vesti-bune/og.jpg" />
  <meta property="og:image:secure_url" content="https://vcarciu.github.io/vesti-bune/og.jpg" />
  <meta property="og:image:type" content="image/jpeg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Ve»ôti bune" />
  <meta name="twitter:description" content="»òtiri pozitive, curate, din surse serioase." />
  <meta name="twitter:image" content="https://vcarciu.github.io/vesti-bune/og.jpg" />
</head>

<body style="
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  max-width: 900px;
  margin: 0 auto;
  padding: 20px;
  background: #fafafa;
  color: #111;
">

  <header style="display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:10px;">
    <div></div>
    <a href="/vesti-bune/about.html" style="color:#111; text-decoration:underline; font-size:13px;">
      Despre proiect
    </a>
  </header>

  <h1 style="font-size:44px; margin:10px 0;">Ve»ôti bune</h1>
  <p style="color:#444; margin:0 0 10px;">
    Curate. Pe sec»õiuni. Refresh automat la fiecare 60 de minute.
  </p>
  <p id="meta" style="color:#666; font-size:13px; margin:0 0 18px;"></p>

  <!-- Top blocks -->
  <div id="top-blocks" style="display:grid; grid-template-columns: 1fr; gap:12px; margin-bottom:18px;"></div>

  <!-- Sections -->
  <div id="sections"></div>

  <script>
    const SECTION_TITLES = {
      romania: "üá∑üá¥ Rom√¢nia",
      medical: "ü©∫ Descoperiri medicale",
      science: "üî¨ »òtiin»õƒÉ & Tech",
      environment: "üå± Mediu & Energie",
      photos: "üì∏ Poza zilei",
      joke: "üòÑ Bancul zilei",
      satire: "üòà SatirƒÉ (TimesNewRoman)"
    };

    function el(tag, attrs = {}, text = "") {
      const n = document.createElement(tag);
      for (const [k, v] of Object.entries(attrs)) {
        if (k === "style") n.style.cssText = v;
        else n.setAttribute(k, v);
      }
      if (text) n.textContent = text;
      return n;
    }

    function cardBase() {
      return `
        background:#fff;
        border:1px solid #e8e8e8;
        border-radius:14px;
        padding:16px;
        box-shadow:0 1px 8px rgba(0,0,0,0.04);
      `;
    }

    function renderNewsItem(it) {
      const card = el("div", { style: cardBase() + " margin:12px 0;" });

      const h = el("h3", { style: "margin:0 0 8px;font-size:18px;line-height:1.25" });
      const a = el("a", {
        href: it.link,
        target: "_blank",
        rel: "noopener noreferrer",
        style: "color:#111;text-decoration:none"
      });
      const title = (it.kind === "global" && it.title_ro) ? it.title_ro : it.title;
      a.textContent = title;
      a.onmouseover = () => a.style.textDecoration = "underline";
      a.onmouseout = () => a.style.textDecoration = "none";
      h.appendChild(a);

      const summary = (it.kind === "global" && it.summary_ro) ? it.summary_ro : (it.summary || "");
      const p = el("p", { style: "margin:0 0 10px;color:#333;line-height:1.5" }, summary);

      const meta = el("div", { style: "font-size:12px;color:#777" });
      const d = new Date(it.published_utc);

      if (it.kind === "global") {
        meta.innerHTML =
          `üåç GLOBAL ‚Ä¢ Titlu & rezumat traduse ‚Ä¢ ${it.source} ‚Ä¢ ${d.toLocaleString("ro-RO")} ‚Ä¢ ` +
          `<a href="${it.link}" target="_blank" rel="noopener noreferrer" style="color:#555;text-decoration:underline">Original</a>`;
      } else {
        meta.textContent = `üá∑üá¥ RO ‚Ä¢ ${it.source} ‚Ä¢ ${d.toLocaleString("ro-RO")}`;
      }

      card.appendChild(h);
      if (summary) card.appendChild(p);
      card.appendChild(meta);

      return card;
    }

    function renderTopBlocks(sections) {
      const host = document.getElementById("top-blocks");
      host.innerHTML = "";

      // Bancul zilei (placeholder p√¢nƒÉ la pasul 4)
      const joke = (sections.joke && sections.joke[0]) ? sections.joke[0] : null;
      const jokeCard = el("div", { style: cardBase() });
      jokeCard.appendChild(el("div", { style:"font-size:13px;color:#666;margin-bottom:8px" }, "üòÑ Bancul zilei"));
      jokeCard.appendChild(el("div", { style:"font-size:16px;color:#111;line-height:1.5" },
        joke && joke.text ? joke.text : "√én cur√¢nd üôÇ"
      ));

      // Poza zilei (placeholder p√¢nƒÉ la pasul 4)
      const photos = Array.isArray(sections.photos) ? sections.photos : [];
      const photoCard = el("div", { style: cardBase() });
      photoCard.appendChild(el("div", { style:"font-size:13px;color:#666;margin-bottom:8px" }, "üì∏ Poza zilei"));

      if (photos.length) {
        photos.slice(0, 3).forEach(ph => {
          const wrap = el("div", { style:"margin:10px 0;" });
          const img = el("img", {
            src: ph.image_url,
            alt: ph.title || "Photo",
            style: "width:100%;max-height:320px;object-fit:cover;border-radius:12px;border:1px solid #eee;"
          });
          const cap = el("div", { style:"font-size:12px;color:#666;margin-top:6px;line-height:1.35" });
          cap.innerHTML = `${ph.source || ""}${ph.source ? " ‚Ä¢ " : ""}<a href="${ph.link}" target="_blank" rel="noopener noreferrer" style="color:#555;text-decoration:underline">${ph.title || "Deschide"}</a>`;
          wrap.appendChild(img);
          wrap.appendChild(cap);
          photoCard.appendChild(wrap);
        });
      } else {
        photoCard.appendChild(el("div", { style:"font-size:16px;color:#111;line-height:1.5" }, "√én cur√¢nd üôÇ"));
      }

      // SatirƒÉ (placeholder p√¢nƒÉ la pasul 4)
      const satire = (sections.satire && sections.satire[0]) ? sections.satire[0] : null;
      const satCard = el("div", { style: cardBase() });
      satCard.appendChild(el("div", { style:"font-size:13px;color:#666;margin-bottom:8px" }, "üòà SatirƒÉ (TimesNewRoman)"));
      if (satire && satire.link) {
        const sa = el("a", {
          href: satire.link,
          target: "_blank",
          rel: "noopener noreferrer",
          style: "color:#111;text-decoration:underline;font-size:16px;line-height:1.5"
        }, satire.title || "Cite»ôte");
        satCard.appendChild(sa);
        satCard.appendChild(el("div", { style:"font-size:12px;color:#777;margin-top:6px" }, "SatirƒÉ ‚Äî nu este »ôtire realƒÉ."));
      } else {
        satCard.appendChild(el("div", { style:"font-size:16px;color:#111;line-height:1.5" }, "√én cur√¢nd üôÇ"));
      }

      // layout: 1 col pe mobil, 3 col pe ecrane mai mari (fƒÉrƒÉ CSS extern)
      host.style.gridTemplateColumns = "1fr";
      if (window.innerWidth >= 900) host.style.gridTemplateColumns = "1fr 1fr 1fr";

      host.appendChild(photoCard);
      host.appendChild(jokeCard);
      host.appendChild(satCard);

      window.addEventListener("resize", () => {
        host.style.gridTemplateColumns = (window.innerWidth >= 900) ? "1fr 1fr 1fr" : "1fr";
      });
    }

    function renderSections(sections) {
      const container = document.getElementById("sections");
      container.innerHTML = "";

      const order = ["romania", "medical", "science", "environment"];

      for (const secId of order) {
        const arr = Array.isArray(sections[secId]) ? sections[secId] : [];
        if (!arr.length) continue;

        const header = el("h2", { style:"margin:26px 0 10px;font-size:22px" }, SECTION_TITLES[secId] || secId);
        container.appendChild(header);

        arr.forEach(it => {
          container.appendChild(renderNewsItem(it));
        });
      }
    }

    async function load() {
      const res = await fetch(`./data/news.json?t=${Date.now()}`, { cache: "no-store" });
      const data = await res.json();

      const meta = document.getElementById("meta");
      const generated = new Date(data.generated_utc);
      meta.textContent = `Ultima actualizare: ${generated.toLocaleString("ro-RO")}`;

      const sections = data.sections || {};
      renderTopBlocks(sections);
      renderSections(sections);
    }

    load().catch(err => {
      document.getElementById("sections").innerHTML = `
        <div style="${cardBase()} margin:12px 0;">
          <h2 style="margin:0 0 8px;">Eroare la √ÆncƒÉrcare</h2>
          <p style="margin:0;color:#333">${String(err)}</p>
        </div>
      `;
    });
  </script>

</body>
</html>
